---
title: JavaScript 函数执行栈理解
date: 2016-10-24 22:24:42
categories: 
- Frontend Development 
- Javascript
tags: javascript

---





## 什么是函数执行栈？

函数执行栈（Function Execution Stack）是一种数据结构，用于存储当前正在执行的所有函数的执行上下文（Execution Context）。

当函数被调用时，JavaScript 引擎会为该函数创建一个执行上下文并将其推入栈中；

当函数执行结束后，其执行上下文会从栈中弹出。



## 函数执行栈在 JavaScript 中的作用是什么？

- **维护执行顺序**：保证 JavaScript 代码按照正确的顺序执行，遵循先进后出的原则（后调用的先执行结束）。
- **管理函数调用**：在函数调用时记录函数调用的层级，跟踪每个函数的执行上下文，确保在一个函数调用结束后，能返回到正确的位置继续执行剩余代码。
- **错误处理**：当发生异常时，执行栈的信息有助于调试（例如调用栈跟踪），帮助开发者定位错误发生的上下文。



## 如何理解函数执行栈中的“栈”结构？

“栈”是一种**后进先出（LIFO, Last In First Out）**的数据结构，这意味着：

- **新调用的函数**：每次函数调用时，都会将其执行上下文“压入”栈顶。
- **函数执行完成**：当一个函数执行完毕，它对应的执行上下文会从栈顶“弹出”，从而返回到调用它的函数。
- 这种结构确保了嵌套调用或递归调用的顺序管理，最后进入的函数先完成。



## 函数执行栈与调用栈有什么区别？

在大多数文献和实际开发中，“函数执行栈”和“调用栈”通常被视为同一个概念，两者都是指存储函数调用的执行上下文的栈结构。

- **调用栈**：强调“调用”的过程和顺序。
- **函数执行栈**：则侧重于记录函数执行期间的上下文。
   总的来说，在 JavaScript 中，这两个术语是互换使用的，概念上没有区别。



## 递归函数是如何影响函数执行栈的？

- **递归调用**：每一次递归调用都会创建一个新的执行上下文并将其压入栈中。
- **深度递归**：如果递归层次过深，可能会导致栈溢出（Stack Overflow），因为每个调用都会占用栈内存。
- **递归返回**：当最内层的递归调用结束时，执行上下文逐层弹出，最终返回到初始调用处。

例如，对于一个递归求阶乘的函数，每次递归调用都会增加一个上下文；当递归结束时，上下文逐个弹出，得到最终结果。

